<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>木 直</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../public/page.css">

    <style>
        img {
            width: 100%;
            margin: 3%;
            padding-top: 6%;
            padding-left: 6%;
            padding-right: 6%;
        }
        p{
            padding-left: 9%;
            font-weight: lighter;
            font-size: medium;
        }
    </style>
</head>

<body>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <!-- TOP navbar -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container-fluid ">
            <a class="navbar-brand" href="homePage.html">木 直</a>
            <!-- 網頁縮到最小，將列表聚集，待調整位置-->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <ul class="navbar-nav  navbar-right  ">
                <div class="collapse navbar-collapse " id="navbarSupportedContent">
                    <li class="nav-item  mx-3 dropdown"> <!-- 下拉式選單 -->
                        <a class="nav-link dropdown-toggle " href="products.html" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            商品分類
                        </a>
                        <ul class="dropdown-menu " aria-labelledby="navbarDropdown">
                            <li>
                                <h6 class="dropdown-header">花盆</h6>
                            </li>
                            <li><a class="dropdown-item" onclick="btnClick('g')">陶瓷</a></li>
                            <li><a class="dropdown-item" onclick="btnClick('p')">鐵砂</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li>
                                <h6 class="dropdown-header">園藝工具</h6>
                            </li>
                            <li><a class="dropdown-item" onclick="btnClick('scissors')">剪刀｜器具</a></li>
                            <li><a class="dropdown-item" onclick="btnClick('tools')">換盆幫手</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" onclick="btnClick('gm')">介質</a></li>
                        </ul>
                    </li>
                    <li class="nav-item mx-3">
                        <a class="nav-link" href="news.html">最新消息</a>
                    </li>
                    <li class="nav-item  mx-3">
                        <a class="nav-link" href="#">聯絡我們</a>
                    </li>
                    <li class="nav-item mx-3">
                        <% if (userName=="Guest" ) { %>
                            <a href="/login.html"><i class="bi bi-person-fill"></i></a>
                            <% } else { %>
                                <a href="/logout"><i class="bi bi-box-arrow-in-left"></i></a>
                                <% } %>
                                    Hi! <%= userName %>
                    </li>
                </div>
            </ul>
        </div>
    </nav>
    <br><br>
    <!-- siderbar -->
    <div class="container pt-5 ml-2">
        <div>
            <aside class="sidebar">
                <p></p>
                <ul class="list-unstyled">
                    <li>
                        <button class="btn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample"
                            aria-expanded="false" aria-controls="collapseExample">
                            花盆
                        </button>
                        <div class="collapse show" id="collapseExample">
                            <ul class="list-unstyled">
                                <li class="pdName" id="li_g" onclick="btnClick('g')">陶瓷花盆</li>
                            </ul>
                            <ul class="list-unstyled">
                                <li class="pdName" id="li_p" onclick="btnClick('p')">鐵砂花盆</li>
                            </ul>
                        </div>
                    </li>
                    <li class="my-2 mx-1 border-top"></li>

                    <li>
                        <button class="btn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample2"
                            aria-expanded="false" aria-controls="collapseExample2">
                            園藝工具
                        </button>
                        <div class="collapse show" id="collapseExample2">
                            <ul class="list-unstyled">
                                <li class="pdName" id="li_scissors" onclick="btnClick('scissors')">剪刀｜器具</li>
                            </ul>
                            <ul class="list-unstyled">
                                <li class="pdName" id="li_tools" onclick="btnClick('tools')">換盆幫手</li>
                            </ul>
                        </div>
                    </li>
                    <li class="my-2 mx-1 border-top"></li>
                    <li>
                        <button class="btn" type="button" data-bs-toggle="collapse show"
                            data-bs-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample2"
                            id="li_gm" onclick="btnClick('gm')">
                            介質
                        </button>
                    </li>
                    <li class="my-2 mx-1 border-top"></li>
            </aside>
        </div>
        <!-- 商品圖 -->
        <div class="main">
            <h1 id="type_title"></h1>
            <hr>
            <div class="row" id="imageRows">
            </div>
        </div>
    </div>
    <br><br><br>


    <!-- 網頁底部 -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <!-- col-6 網頁縮到最小，只出現12/6=2格 12/3=4  -->
                <div class="col-6 col-md-3">
                    <h3>木直園藝工作坊</h3>
                </div>
                <div class="col-6 col-md-3">
                </div>
                <div class="col-6 col-md-3">
                    <ul>
                        <li>
                            <h6>木 直</h6>
                        </li>
                        <li>09-12534645 </li>
                        <li>台中市南屯區公益路二段51號</li>
                        <li>客服信箱：service@muji.com.tw</li>
                    </ul>
                </div>
                <div class="col-6 col-md-3">
                    <ul>
                        <li>
                            <h6>OPEN HOURS</h6>
                        </li>
                        <li>週一至週五 13:00-18:30</li>
                        <li>週六及週日 11:00-18:30</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- 回到最上頁 -->
    <button onclick="topFunction()" id="myBtn" title="Go to top">↑</button>

    <script>
        // 首頁點擊商品跳到該商品頁面
        const urlParams = new URLSearchParams(window.location.search);
        const category = urlParams.get("category");

        // 顯示對應的商品頁面
        if (category === "g") {
            btnClick('g');
        } else if (category === "p") {
            btnClick('p');
        } else if (category === "scissors") {
            btnClick('scissors');
        } else if (category === "tools") {
            btnClick('tools');
        } else if (category === "gm") {
            btnClick('gm');
        }
        //點擊商品分類字體加粗
        function btnClick(typeNM) {
            console.log('typeNM>>' + typeNM);

            //拿掉所有分類粗體
            document.getElementById("li_g").innerHTML = '陶瓷花盆';
            document.getElementById("li_p").innerHTML = '鐵砂花盆';
            document.getElementById("li_scissors").innerHTML = '剪刀｜器具';
            document.getElementById("li_tools").innerHTML = '換盆幫手';
            document.getElementById("li_gm").innerHTML = '介質';

            var type_title;
            if ('g' === typeNM) {
                type_title = '陶瓷花盆';
            } else if ('p' === typeNM) {
                type_title = '鐵砂花盆';
            } else if ('scissors' === typeNM) {
                type_title = '剪刀｜器具';
            } else if ('tools' === typeNM) {
                type_title = '換盆幫手';
            } else if ('gm' === typeNM) {
                type_title = '介質';
            }

            document.getElementById("type_title").innerHTML = type_title;
            //當前分類+粗體
            document.getElementById("li_" + typeNM).innerHTML = '<b>' + type_title + '</b>';

            getPic(typeNM); //getPic收到該商品分類名字參數
        }

        function getPic(typeNM) {
            // 建立圖片的容器
            var imageRows = document.getElementById("imageRows");
            imageRows.innerHTML = "";//清空照片區

            // 文本内容
            // for (k = 1; k < 10; k++) {
            //     var captions =
            //         ["[A01] ", "[A01]", "[A01]", "[A01]",
            //             "[A01] ", "[A01]", "[A01]", "[A01]",
            //             "[A01] ", "[A01]", "[A01]", "[A01]"];
            // }
            var pc=0;
            if ('g' === typeNM) {
                pc=20;
            } else if ('p' === typeNM) {
                pc=23;
            } else if ('scissors' === typeNM) {
                pc=7;
            } else if ('tools' === typeNM) {
                pc=8;
            } else if ('gm' === typeNM) {
                pc=10;
            }
            var captions = [];
            for (var k = 1; k <= pc; k++) {
                // 使用字符串格式生成編號
                var formattedNumber = k.toString().padStart(2, '0');
                var caption = "  [" + typeNM + formattedNumber + "]";

                // 将生成的文本添加到数组中
                captions.push(caption);
            }
            
            // 排列照片
            for (var i = 0; i < 1; i++) {
                var row = document.createElement("div");  // div class="row"
                row.className = "row";

                for (var j = 0; j < pc; j++) {
                    var col = document.createElement("div");  // <div calss="col-md-3">
                    col.className = "col-md-3";
                    var img = document.createElement("img");
                    img.src = "../public/img/product/" + typeNM + "/" + (j + 1) + ".jpg";
                    img.alt = "";

                    var caption = document.createElement("p");
                    caption.textContent = captions[j]; // 根据索引获取对应的文本内容

                    col.appendChild(img);
                    col.appendChild(caption);
                    row.appendChild(col);
                }

                imageRows.appendChild(row);
            }
        }

        let mybutton = document.getElementById("myBtn");

        //當網頁向下捲動20px後會出現button
        window.onscroll = function () { scrollFunction() };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                mybutton.style.display = "block";
            } else {
                mybutton.style.display = "none";
            }
        }
        //document.documentElement.scrollTop:獲取垂直滾動距離，適合用在較現代的瀏覽器
        //document.body.scrollTop:獲取垂直滾動距離，常用在較舊的瀏覽器

        // 點擊button，回到網頁最上面
        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>



</body>

</html>